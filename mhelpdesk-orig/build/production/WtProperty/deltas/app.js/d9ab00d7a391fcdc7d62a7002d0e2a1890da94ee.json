["function _91941414d5c4691c664d0792f343942f53ec4402",50,2461,"if(!mhelpdesk.view.ticket){mhelpdesk.view.ticket={}}if(!mhelpdesk.view.visitor){mhelpdesk.view.visitor",2507,692337,"osPage\",Ext.Panel,{config:{itemId:\"sospage\",cls:\"p-sos-page\",",903866,47,"},txtFilter:\"Find",885776,35,869991,32,"b=mhelpdesk.view.Locale;var e",867307,51,900425,38,"electfield\",itemId:\"selection\",usePicker:true,cls:\"r-tool-item\",width:100,options:[{text:\"Status\",value:\"status\"},{text:\"Name\",value:\"name\"},{text:\"Unit No\",value:\"serial_no\"},{text:\"Date\",value:\"created\"}],listeners:{change:function(h,i,f,g){if(i==\"status\"){d.down(\"#filterStatus\").setHidden(false);d.down(\"#filterText\").setHidden(true)}else{d.down(\"#filterStatus\").setHidden(true);d.down(\"#filterText\").setHidden(false)}}}},{xtype:\"selectfield\",cls:\"r-tool-field\",itemId:\"filterStatus\",usePicker:true,flex:1,hidden:false,options:[{text:\"OPEN\",value:\"open\"},{text:\"CLOSED\",value:\"closed\"}]},{xtype:\"textfield\",cls:\"r-tool-field\",flex:1,hidden:true,itemId:\"filterText\"",883852,59,"pack:\"start\",align",910590,32,"e,{xtype:\"button\",width:100,itemId:\"btnSubmit\",cls:\"r-button\",name:\"btnSubmit",853785,40,"text:d.txtFilter",888288,45,"filter\",d,f,h,g)}}},{xtype:\"button\",width:100,itemId:\"btnSubmit\",cls:\"r-button\",name:\"btnSubmit",909205,37,"text:\"CLOSE\"",888288,46,"lose\",d",909430,228,"d.fireEvent(\"info",861181,32,"a,{xtype:\"sosLis",850908,112,"SOS Call ",862285,35,";Ext",895152,50,"},0,[\"sosp",856621,40,"sos",858943,38,"panel:true,sospage:true},[\"widget.sospage\"],0,[mhelpdesk.view,\"Sos",859039,43,533292,36,694879,299,"s",695178,67,"s",695245,583,"s",695828,21217,"sospage:\"sospage\",sosACtion:\"sosACtion\",visitorPage:\"visitorPage\",registerVisitor:\"registerVisitor",717043,242,"sosList:\"sosList",717283,5341,"sospage:{close:function(c,a,d,b){this.popPage()},filter:function(g,i,d,f){var h=this;var c=g.getItemId()+\".filter\";app.dh(\"Start\",\"...\",c);var l=g.down(\"#selection\").getValue();if(l==\"status\"){var b=g.down(\"#filterStatus\").getValue();h.getTicketBySOS(true,\"ticket.status='\"+b+\"'\",function(m,e,n){})}else{if(l==\"name\"){var a=g.down(\"#filterText\").getValue();h.getTicketBySOS(true,\"ticket.name LIKE '\"+a+\"%'\",function(m,e,n){})}else{if(l==\"serial_no\"){var k=g.down(\"#filterText\").getValue();h.getTicketBySOS(true,\"asset.seral_no='\"+k+\"'\",function(m,e,n){})}else{if(l==\"created\"){var j=g.down(\"#filterText\").getValue();h.getTicketBySOS(true,\"ticket.created LIKE '\"+j+\"%'\",function(m,e,n){})}else{}}}}}},sosACtion:{close:function(c,a,d,b){this.popPage()}},visitorPage:{tapBack:function(c,a,d,b){this.popPage()},tapRegister:function(f,b,g,c){var d=this;var h=f.getItemId()+\".tapRegister\";app.dh(\"Start\",\"...\",h);var a=Ext.create(\"mhelpdesk.view.visitor.Register\");d.pushPage(a)}},registerVisitor:{close:function(c,a,d,b){this.popPage()},camera:function(f,a,g,c){var d=this;var i=f.getItemId()+\".camera\";app.dh(\"Start\",\"...\",i);var b",853335,47,"\");d.getPhoto(a,b,h)}},guardPage:{activate:function(e,d,a,b){var c=this;var f=d.getItemId()+\".show\";app.dh(\"Start\",\"...\",f);c.getTicketBySOS(false,\"ticket.status='open'\",function(h,g,j){console.error(h.length);if(h.length>0){var i=d.down(\"#sosMain\");i.setBadgeText(h.length)}})},",722635,1065,",tapSos:function(f,b,g,c){var d=this;var h=f.getItemId()+\".tapSos\";app.dh(\"Start\",\"..\",h);var a=Ext.getStore(\"localSosTicketStore\");d.getTicketBySOS(true,\"ticket.status='open'\",function(i,e,k){console.error(i.length);if(i.length>0){var j=Ext.create(\"mhelpdesk.view.SosPage\");d.pushPage(j)}})},tapVisitor:function(m,o,j,k){var n=this;var f=m.getItemId()+\".tapVisitor\";app.dh(\"Start\",\"..\",f);var g=Ext.create(\"mhelpdesk.view.VisitorPage\");var m=g;var a=m.down(\"#mainPanel\");var l=[];l",762655,79,"NEW REGISTER\",listeners:{tap:function(i,r,q){m.fireEvent(\"tapRegister\",m,i,r,q)}}});l",762655,50,"users fa-2x\",badgeText:\"0\",text:\"VISITOR",866868,33,"r,q){m.fireEvent(\"tapAmbulance\",m,i,r,q)}}});l",866639,51,"redit-card fa-2x\",text:\"VISITOR PASS\",listeners:{tap:function(i,r,q){m.fireEvent(\"tapAmbulance\",m,i,r,q)}}});l",763295,51,"ruck fa-2x\",badgeText:\"0\",text:\"DELIVERY VEHICLE\",listeners:{tap:function(i,r,q){m.fireEvent(\"tapAmbulance\",m,i,r,q)}}});l",763295,51,"imes fa-2x\",text:\"BACK TO MAIN\",listeners:{tap:function(i,r,q){m.fireEvent(\"tapBack\",m,i,r,q)}}});var h",763595,32,"l.length;d++){if(h",763645,130,"l[d]);h++;if(h>3){h",763794,44,"n.pushPage(g)},tapLogin:function(f,b,g,c){var d=this;var h=f.getItemId()+\".tapVisitor\";app.dh(\"Start\",\"..\",h);if(system.getIsLogin()){d.doLogout()}else{var a=",769551,35,"d.pushPage(a",723697,23267,"sosList:{itemtap:function(k,c,d,b,f,g){var j=this;var a=k.getItemId()+\".itemtap\";app.dh(\"Start\",\"...\",a",748995,39,"ticket.SosAction\");j.getTicketById(b.data.ticket_id,true,function(l,e,m){console.error(l.length);j.pushPage(i);if(l.length>0){i.setRecord(l[0])}})}catch(h){j.errHandler(h,a)}",746961,18807,"ISTRATOR",765768,11420,"ubscribeOneSignal:function(b,e,a){var c=this;var d=this.getItemId()+\".subscribeOneSignal\";c.OneSignal=OneSignal||[];c.OneSignal",782908,281,"wtProperty",783204,61,"wtProperty",783280,231,"wtProperty",783389,32,783558,75,"wtProperty",783648,262,"OneSignal.push(function(){c.OneSignal",783927,34,"f){if(f){c.OneSignal.getUserId(function(g){c.dh(\"Subscribe\",g,d);c.OneSignal.push([\"sendTags\",{user:b,role:e",779374,32,"}])})}})});c",753851,46,"\"Login\",\"User \"+b+\" just login ...\")",777185,5483,"subscribeOneSignal(system.getUser(),\"CLIENT\",system.getCompanyName()",782684,8693,"f,a){var e=this;var c=this.getItemId()+\".filterTicketById\";try{var g=null;var i=false;var b=new RegExp(a,\"i\");console.log(b);var h",792703,36,"clearFilter();h.filterBy(function(j){i=b.test(j.get(f));if(i){g=j}});h.clearFilter();return g}catch(d){e.errHandler(d,c",791624,1330,"app.dh(\"Start\",\"...\",d",792988,356,"BySOS:function(g,b",792465,33,"SOS\";app.dh(\"Start\",b,d);try{var a=\"ticket.topic_id=2\";if(b){a+=\" AND \"+b}app.dh(\"Filter\",a,d)",793021,115,"Sos",792240,39,"SosTicketStore\");h._localSos",793197,13430,"7",806628,187,"s",806815,31748,"os",844496,41,"localSos",844543,44,835511,35," locale.getText(\"Status\")+\":\"+locale.getText(a.get(\"status\"))",837663,32,"ticket",834734,43,"SosTicke",840288,41,838557,5939,"Sos",844496,47,"Sos",844543,248,"SosTicke",841806,76,844496,21111,"t=this;var k=\"Main-initialize\";try{var l=mhelpdesk.view.Locale;var c",865675,51,"c.getScreenMode());var s;if(c.getScreenMode()==2){s",865777,44,"e=s;var g=e.down(\"#mainPanel\");var f=[];var d=c.getIsLogin();var m=\"LOGIN\";var h=\"fa-sign-in fa-2x\";if(d){m=\"LOGOUT\";h=\"fa-sign-out fa-2x\"}f",762655,51,865913,59,"v,u){e.fireEvent(\"tapCallOwner\",e,i,v,u)}}});f",762655,50,866068,60,"v,u){e.fireEvent(\"tapAmbulance\",e,i,v,u)}}});f",763295,52,866226,50,"v,u){e.fireEvent(\"tapPolice\",e,i,v,u)}}});f",762655,50,"users fa-2x\",text:\"TO CALL MANAGEMENT\",listeners:{tap:function(i,v,u){e.fireEvent(\"tapManagement\",e,i,v,u)}}});f",762655,50,"university fa-2x\",text:\"LOCAL COUNCIL\",listeners:{tap:function(i,v,u){e.fireEvent(\"tapCouncil\",e,i,v,u)}}});f.push({xtype:\"button\",itemId:\"sosMai",866812,89,"v,u){e.fireEvent(\"tapSos\",e,i,v,u)}}});f",866639,51,866996,60,"v,u){e.fireEvent(\"tapVisitor\",e,i,v,u)}}});f",762655,46,"h,text:m,listeners:{tap:function(i,v,u){e.fireEvent(\"tapLogin\",e,i,v,u)}}});f",762655,50,867150,53,"v,u){e.fireEvent(\"tapSetting\",e,i,v,u)}}});var b=1;var j;var q=[];for(var n=0;n<f.length;n++){if(b==1){j",867307,108,"q.push(j)}j.add(f[n]);b++;if(b>3){b=1}}for(var n=0;n<q.length;n++){g.add(q[n])}}else{s",867501,200,"s",867702,153,"t",867856,41,"l",867898,47,870128,55,"'+c",868003,56,"c",868060,61,"a=t.getNavigationBar();var o",868149,186,"a.setBackButton(o);a.add({",860992,34,892320,42,868437,81,"a",868519,148,"t",868668,173,"r){console.error(r",868859,47449,914272,34,"sitor",855508,224,"Visitor Check",855737,93,"visitor",855835,36,"visitorPage\",layout:\"fit\",cls:\"p-visitor",855906,709,"visitor",856620,41,"visitorP",858944,37,"panel:true,visitorPage:true},[\"widget.visitorPage\"],0,[mhelpdesk.view,\"Visitor",859039,43,"ticket.SosAction",887152,35,"osACtion\",cls:\"p-sos-action\",",903866,47,"},txtFilter:\"Find",906415,35,715466,32,"b=mhelpdesk.view.Locale",883856,55,"pack:\"start\",align",910590,48,"width:\"100%\",itemId:\"btnSubmit\",cls:\"r-button\",name:\"btnSubmit",909205,37,"text:\"CLOSE\"",909376,46,"lose",909427,265,"var c",725343,33,"mainContent\",cls:\"r-main",725386,42,"stretch\"},items:[{xtype:\"label\",cls:\"r-title\",html:\"SOS CALL INFORMATION\"},{xtype:\"fieldset\",title:\"Occupant Details\",instructions:\"Information on the occupant\"",888607,33,"\"Trigger Date\",readOnly:true,itemId:\"fcreated\",name:\"fcreated\"},{xtype:\"textfield\",label:\"Status\",readOnly:true,itemId:\"status\",name:\"status\"},{xtype:\"textfield\",label:\"Name\"",897918,40,"},{xtype:\"textfield\",label:\"SOS Message\",readOnly",899269,37,"}]},{xtype:\"fieldset\",title:\"Immediate Action\",instructions:\"Push the button below for immediate action",593429,35,903896,33,"button\",itemId:\"btnSubmit\",cls:\"r-button\",name:\"btnSubmit",865882,35,"\",text:\"CALL\"",909376,47,"ll",908688,41,"Submit\",cls:\"r-button\",name:\"btnSubmit\",iconAlign:\"top\",iconCls:\"fa-users\",text:\"INFORM MANAGEMENT\"",909376,45,"management",908688,41,"Submit\",cls:\"r-button\",name:\"btnSubmit\",iconAlign:\"top\",iconCls:\"fa-upload\",text:\"VISIT UNIT\"",909376,45,"visit\",e,f,h,g)}}}]}]});this.setItems([a,c",877816,61,"},0,[\"sosAC",694575,41,"formpanel\",\"sosACtion",911200,60,"sosACtion:true},[\"widget.sosACtion\"],0,[mhelpdesk.view.ticket,\"SosAc",694800,43,"ticket.Sos",851279,41,"sosList\",cls:\"r-list\",store:\"localSosTicket",851344,282,904799,238,851855,32,875200,35,902459,443,847610,119,"sos",852136,189,",0,[\"sos",847935,51,"sos",846320,62,"sosList:true},[\"widget.sosList\"],0,[mhelpdesk.view.ticket,\"Sos",903293,43,"visitor.Register",887152,34,"registerVisitor\",cls:\"p-visitor-register\",",903866,47,"},txtFilter:\"Find",906415,35,715466,32,"b=mhelpdesk.view.Locale",883856,55,"pack:\"start\",align",910590,48,"width:\"50%\",itemId:\"btnSubmit\",cls:\"r-button\",name:\"btnSubmit",909205,37,"text:\"SAVE\"",909376,45,908684,34,"width:\"50%\",itemId:\"btnSubmit\",cls:\"r-button\",name:\"btnSubmit",909205,37,"text:\"CANCEL\"",909376,46,"lose",909427,265,"var c",725343,33,"mainContent\",cls:\"r-main",725386,42,"stretch\"},items:[{xtype:\"label\",cls:\"r-title\",html:\"VISITOR REGISTRATION\"},{xtype:\"fieldset\",title:\"Visitor Details\",instructions:\"Information on the visitor\"",888607,33,"\"Name\",itemId:\"name\",name:\"name\"},{xtype:\"textfield\",label:\"Contact No\",itemId:\"phone\",name:\"phone\"},{xtype:\"textfield\",label:\"Vehicle No\",itemId:\"vehicle\",name:\"vehicle\"}]},{xtype:\"fieldset\",title:\"ID Picture Taken\",instructions:\"Push the button below for immediate action",593429,35,903896,33,"button\",itemId:\"btnSubmit\",cls:\"r-button\",name:\"btnSubmit",866965,36,"\",text:\"SNAP CAMERA\"",909376,47,"mera",908688,41,"Submit\",cls:\"r-button\",name:\"btnSubmit",865882,35,865923,47,"f,h,g){e.fireEvent(\"call",908688,41,"Submit\",cls:\"r-button\",name:\"btnSubmit\",iconAlign:\"top\",iconCls:\"fa-users\",text:\"INFORM MANAGEMENT\"",909376,45,"management\",e,f,h,g)}}},{xtype:\"textfield",854720,47,"flex:2",854781,76,"]},{itemId:\"loadedImage\",xtype:\"img\",width:\"80%\",height:\"200px\",style:\"margin-top:5px; margin-bottom:5px; background-position: left;\"}]});this.setItems([a,c",877816,61,"},0,[\"registerVisito",606656,38,"formpanel\",\"registerVisito",606720,46,"formpanel:true,registerVisitor:true},[\"widget.registerVisitor\"],0,[mhelpdesk.view.visitor,\"Register",916301,462,"view.visitor\":\"app/view/visitor",916750,620,"osPage\",\"ticket.SosList\",\"ticket.SosAction\",\"VisitorPage",917366,118,"visitor.Register",917481,886,",\"LocalSosTicket\",\"RemoteSosTicke",918365,3987]