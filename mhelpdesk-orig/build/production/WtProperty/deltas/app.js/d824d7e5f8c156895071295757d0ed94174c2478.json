["function _91941414d5c4691c664d0792f343942f53ec4402",50,2461,"if(!mhelpdesk.view.ticket){mhelpdesk.view.ticket={}}if(!mhelpdesk.view.visitor){mhelpdesk.view.visitor",2507,692337,"osPage\",Ext.Panel,{config:{itemId:\"sospage\",cls:\"p-sos-page\",",905316,47,"},txtFilter:\"Find\"",911904,62,836411,32,"e",857486,39,901863,50,"electfield\",itemId:\"selection\",usePicker:true,cls:\"r-tool-item\",width:100,options:[{text:\"Status\",value:\"status\"},{text:\"Name\",value:\"name\"},{text:\"Unit No\",value:\"serial_no\"},{text:\"Date\",value:\"created\"}],listeners:{change:function(h,i,f,g){if(i==\"status\"){d.down(\"#filterStatus\").setHidden(false);d.down(\"#filterText\").setHidden(true)}else{d.down(\"#filterStatus\").setHidden(true);d.down(\"#filterText\").setHidden(false)}}}},{xtype:\"selectfield\",cls:\"r-tool-field\",itemId:\"filterStatus\",usePicker:true,flex:1,hidden:false,options:[{text:\"OPEN\",value:\"open\"},{text:\"CLOSED\",value:\"closed\"}]},{xtype:\"textfield\",cls:\"r-tool-field\",flex:1,hidden:true,itemId:\"filterText\"}]});",863214,54,"pack:\"start\",align",909824,32,"e,{xtype:\"button\",width:100,itemId:\"btnSubmit\",cls:\"r-button\",name:\"btnSubmit",909917,40,"text:d.txtFilter",862574,45,"filter\",d,f,h,g)}}},{xtype:\"button\",width:100,itemId:\"btnSubmit\",cls:\"r-button\",name:\"btnSubmit",910655,37,"text:\"CLOSE\"",862574,46,"lose\",d",910880,228,"d.fireEvent(\"info",863612,32,"a,{xtype:\"sosList",883580,111,"SOS Call ",854256,35,";Ext",879277,50,"},0,[\"sospage",891024,37,"sosp",886669,48,"sospage:true},[\"widget.sospage\"],0,[mhelpdesk.view,\"SosP",886800,43,533293,35,694879,299,"s",695178,67,"s",695245,583,"s",695828,21217,"sospage:\"sospage\",sosACtion:\"sosACtion\",visitorPage:\"visitorPage\",registerVisitor:\"registerVisitor",717043,242,"sosList:\"sosList",717283,5341,"sospage:{close:function(c,a,d,b){this.popPage()},filter:function(g,i,d,f){var h=this;var c=g.getItemId()+\".filter\";app.dh(\"Start\",\"...\",c);var l=g.down(\"#selection\").getValue();if(l==\"status\"){var b=g.down(\"#filterStatus\").getValue();h.getTicketBySOS(true,\"ticket.status='\"+b+\"'\",function(m,e,n){})}else{if(l==\"name\"){var a=g.down(\"#filterText\").getValue();h.getTicketBySOS(true,\"ticket.name LIKE '\"+a+\"%'\",function(m,e,n){})}else{if(l==\"serial_no\"){var k=g.down(\"#filterText\").getValue();h.getTicketBySOS(true,\"asset.seral_no='\"+k+\"'\",function(m,e,n){})}else{if(l==\"created\"){var j=g.down(\"#filterText\").getValue();h.getTicketBySOS(true,\"ticket.created LIKE '\"+j+\"%'\",function(m,e,n){})}else{}}}}}},sosACtion:{close:function(c,a,d,b){this.popPage()}},visitorPage:{tapBack:function(c,a,d,b){this.popPage()},tapRegister:function(f,b,g,c){var d=this;var h=f.getItemId()+\".tapRegister\";app.dh(\"Start\",\"...\",h);var a=Ext.create(\"mhelpdesk.view.visitor.Register\");d.pushPage(a)}},registerVisitor:{close:function(c,a,d,b){this.popPage()},camera:function(f,a,g,c){var d=this;var i=f.getItemId()+\".camera\";app.dh(\"Start\",\"...\",i);var b",854785,47,"\");d.getPhoto(a,b,h)}},guardPage:{activate:function(e,d,a,b){var c=this;var f=d.getItemId()+\".show\";app.dh(\"Start\",\"...\",f);c.getTicketBySOS(false,\"ticket.status='open'\",function(h,g,j){console.error(h.length);if(h.length>0){var i=d.down(\"#sosMain\");i.setBadgeText(h.length)}})},",722635,1065,",tapSos:function(f,b,g,c){var d=this;var h=f.getItemId()+\".tapSos\";app.dh(\"Start\",\"..\",h);var a=Ext.getStore(\"localSosTicketStore\");d.getTicketBySOS(true,\"ticket.status='open'\",function(i,e,k){console.error(i.length);if(i.length>0){var j=Ext.create(\"mhelpdesk.view.SosPage\");d.pushPage(j)}})},tapVisitor:function(m,o,j,k){var n=this;var f=m.getItemId()+\".tapVisitor\";app.dh(\"Start\",\"..\",f);var g=Ext.create(\"mhelpdesk.view.VisitorPage\");var m=g;var a=m.down(\"#mainPanel\");var l=[];l",867312,51,"encil-square-o fa-2x\",text:\"NEW REGISTER\",listeners:{tap:function(i,r,q){m.fireEvent(\"tapRegister\",m,i,r,q)}}});l",867312,50,"users fa-2x\",badgeText:\"0\",text:\"VISITOR",868318,33,"r,q){m.fireEvent(\"tapAmbulance\",m,i,r,q)}}});l",867312,50,"credit-card fa-2x\",text:\"VISITOR PASS\",listeners:{tap:function(i,r,q){m.fireEvent(\"tapAmbulance\",m,i,r,q)}}});l",867312,50,"truck fa-2x\",badgeText:\"0\",text:\"DELIVERY VEHICLE\",listeners:{tap:function(i,r,q){m.fireEvent(\"tapAmbulance\",m,i,r,q)}}});l",867312,50,"times fa-2x\",text:\"BACK TO MAIN\",listeners:{tap:function(i,r,q){m.fireEvent(\"tapBack\",m,i,r,q)}}});var h",763595,32,"l.length;d++){if(h",763645,130,"l[d]);h++;if(h>3){h",763794,44,"n.pushPage(g)},tapLogin:function(f,b,g,c){var d=this;var h=f.getItemId()+\".tapVisitor\";app.dh(\"Start\",\"..\",h);if(system.getIsLogin()){d.doLogout()}else{var a=",769551,35,"d.pushPage(a",723697,23267,"sosList:{itemtap:function(k,c,d,b,f,g){var j=this;var a=k.getItemId()+\".itemtap\";app.dh(\"Start\",\"...\",a",748995,39,"ticket.SosAction\");j.getTicketById(b.data.ticket_id,true,function(l,e,m){console.error(l.length);j.pushPage(i);if(l.length>0){i.setRecord(l[0])}})}catch(h){j.errHandler(h,a)}",746961,18807,"ISTRATOR",765768,11622,784433,206,"wtProperty",784654,61,"wtProperty",777662,231,"wtProperty",784976,107,"wtProperty",778016,517,"DMINISTRATOR",778545,14282,"f,a){var e=this;var c=this.getItemId()+\".filterTicketById\";try{var g=null;var i=false;var b=new RegExp(a,\"i\");console.log(b);var h",793709,36,"clearFilter();h.filterBy(function(j){i=b.test(j.get(f));if(i){g=j}});h.clearFilter();return g}catch(d){e.errHandler(d,c",793074,1330,"app.dh(\"Start\",\"...\",d",794438,356,"BySOS:function(g,b",793915,33,"SOS\";app.dh(\"Start\",b,d);try{var a=\"ticket.topic_id=2\";if(b){a+=\" AND \"+b}app.dh(\"Filter\",a,d)",796880,32,794503,83,"Sos",793690,39,"SosTicketStore\");h._localSos",794647,13430,"7",808078,187,"s",808265,31748,"os",845946,41,"localSos",845993,44,836961,35," locale.getText(\"Status\")+\":\"+locale.getText(a.get(\"status\"))",835344,32,840702,49,"Sos",840751,51,840012,5934,"Sos",845946,47,"Sos",845993,248,"SosTicket",845136,75,845946,21111,"t=this;var k=\"Main-initialize\";try{var l=mhelpdesk.view.Locale;var c",867125,51,"c.getScreenMode());var s;if(c.getScreenMode()==2){s",867227,44,"e=s;var g=e.down(\"#mainPanel\");var f=[];var d=c.getIsLogin();var m=\"LOGIN\";var h=\"fa-sign-in fa-2x\";if(d){m=\"LOGOUT\";h=\"fa-sign-out fa-2x\"}f",867312,110,"v,u){e.fireEvent(\"tapCallOwner\",e,i,v,u)}}});f",867312,50,867518,60,"v,u){e.fireEvent(\"tapAmbulance\",e,i,v,u)}}});f",867312,50,867674,52,"v,u){e.fireEvent(\"tapPolice\",e,i,v,u)}}});f",867312,50,"users fa-2x\",text:\"TO CALL MANAGEMENT\",listeners:{tap:function(i,v,u){e.fireEvent(\"tapManagement\",e,i,v,u)}}});f",867312,50,"university fa-2x\",text:\"LOCAL COUNCIL\",listeners:{tap:function(i,v,u){e.fireEvent(\"tapCouncil\",e,i,v,u)}}});f.push({xtype:\"button\",itemId:\"sosMai",867788,32,868294,57,"v,u){e.fireEvent(\"tapSos\",e,i,v,u)}}});f",867312,50,868445,61,"v,u){e.fireEvent(\"tapVisitor\",e,i,v,u)}}});f",867312,46,"h,text:m,listeners:{tap:function(i,v,u){e.fireEvent(\"tapLogin\",e,i,v,u)}}});f",867312,50,868600,53,"v,u){e.fireEvent(\"tapSetting\",e,i,v,u)}}});var b=1;var j;var q=[];for(var n=0;n<f.length;n++){if(b==1){j",857486,39,868796,69,"q.push(j)}j.add(f[n]);b++;if(b>3){b=1}}for(var n=0;n<q.length;n++){g.add(q[n])}}else{s",868951,200,"s",869152,153,"t",869306,41,"l",871531,102,"'+c",869453,56,871676,53,"'}]);var a=t.getNavigationBar();var o",869599,186,"a.setBackButton(o);a",869805,163,"a",869969,148,"t",870118,173,"r){console.error(r",870309,47449,852176,32,"Visitor",856958,224,"Visitor Check",857187,93,"visitor",857285,36,"visitorPage\",layout:\"fit\",cls:\"p-visitor",857356,709,"visitorPage",891024,37,"visitorP",886669,48,"visitorPage:true},[\"widget.visitorPage\"],0,[mhelpdesk.view,\"VisitorP",886800,42,"ticket.SosAction",886848,35,"osACtion\",cls:\"p-sos-action\",",905316,47,"},txtFilter:\"Find\"",857376,33,892496,33,"b=mhelpdesk.view.Locale;",863214,54,"pack:\"start\",align",909824,48,"width:\"100%\",itemId:\"btnSubmit\",cls:\"r-button\",name:\"btnSubmit",910655,37,"text:\"CLOSE\"",885998,45,"close",910877,265,"var c",888064,33,"mainContent\",cls:\"r-main",725386,42,"stretch\"},items:[{xtype:\"label\",cls:\"r-title\",html:\"SOS CALL INFORMATION\"},{xtype:\"fieldset\",title:\"Occupant Details\",instructions:\"Information on the occupant\"",890057,33,"\"Trigger Date\",readOnly:true,itemId:\"fcreated\",name:\"fcreated\"},{xtype:\"textfield\",label:\"Status\",readOnly:true,itemId:\"status\",name:\"status\"},{xtype:\"textfield\",label:\"Name\"",899368,40,"},{xtype:\"textfield\",label:\"SOS Message\",readOnly",900719,37,"}]},{xtype:\"fieldset\",title:\"Immediate Action\",instructions:\"Push the button below for immediate action",593429,35,905346,33,"button\",itemId:\"btnSubmit\",cls:\"r-button\",name:\"btnSubmit",867332,35,"\",text:\"CALL\"",885998,45,"call",885742,41,"Submit\",cls:\"r-button\",name:\"btnSubmit\",iconAlign:\"top\",iconCls:\"fa-users\",text:\"INFORM MANAGEMENT\"",885998,45,"management",885742,41,"Submit\",cls:\"r-button\",name:\"btnSubmit\",iconAlign:\"top\",iconCls:\"fa-upload\",text:\"VISIT UNIT\"",885998,45,"visit\",e,f,h,g)}}}]}]});this.setItems([a,c",880334,61,"},0,[\"sosAC",883200,33,"panel\",\"formpanel\",\"sosACtion",886672,60,"sosACtion:true},[\"widget.sosACtion\"],0,[mhelpdesk.view.ticket,\"SosAc",694800,43,"ticket.Sos",903232,41,"sosList\",cls:\"r-list\",store:\"localSosTicket",905967,520,847244,32,875996,35,903909,443,877166,119,"sos",861600,189,",0,[\"sos",904560,51,"sos",853839,62,"sosList:true},[\"widget.sosList\"],0,[mhelpdesk.view.ticket,\"Sos",849568,43,"visitor.Register",879728,34,"registerVisitor\",cls:\"p-visitor-register\",",905316,47,"},txtFilter:\"Find\"",857376,33,892496,33,"b=mhelpdesk.view.Locale;",863214,54,"pack:\"start\",align",909824,48,"width:\"50%\",itemId:\"btnSubmit\",cls:\"r-button\",name:\"btnSubmit",910655,37,"text:\"SAVE\"",885998,45,910134,34,"width:\"50%\",itemId:\"btnSubmit\",cls:\"r-button\",name:\"btnSubmit",910655,37,"text:\"CANCEL\"",885998,45,"close",910877,265,"var c",888064,33,"mainContent\",cls:\"r-main",725386,42,"stretch\"},items:[{xtype:\"label\",cls:\"r-title\",html:\"VISITOR REGISTRATION\"},{xtype:\"fieldset\",title:\"Visitor Details\",instructions:\"Information on the visitor\"",890057,33,"\"Name\",itemId:\"name\",name:\"name\"},{xtype:\"textfield\",label:\"Contact No\",itemId:\"phone\",name:\"phone\"},{xtype:\"textfield\",label:\"Vehicle No\",itemId:\"vehicle\",name:\"vehicle\"}]},{xtype:\"fieldset\",title:\"ID Picture Taken\",instructions:\"Push the button below for immediate action",593429,35,905346,33,"button\",itemId:\"btnSubmit\",cls:\"r-button\",name:\"btnSubmit",868415,36,"\",text:\"SNAP CAMERA\"",885998,45,"camera",885742,41,"Submit\",cls:\"r-button\",name:\"btnSubmit",867332,35,867373,47,"f,h,g){e.fireEvent(\"call",885742,41,"Submit\",cls:\"r-button\",name:\"btnSubmit\",iconAlign:\"top\",iconCls:\"fa-users\",text:\"INFORM MANAGEMENT\"",885998,45,"management\",e,f,h,g)}}},{xtype:\"textfield\",",889998,45,"flex:2",856231,76,"]},{itemId:\"loadedImage\",xtype:\"img\",width:\"80%\",height:\"200px\",style:\"margin-top:5px; margin-bottom:5px; background-position: left;\"}]});this.setItems([a,c",880334,61,"},0,[\"registerVisito",606656,38,"formpanel\",\"registerVisito",606720,46,"formpanel:true,registerVisitor:true},[\"widget.registerVisitor\"],0,[mhelpdesk.view.visitor,\"Register",917751,462,"view.visitor\":\"app/view/visitor",918200,620,"osPage\",\"ticket.SosList\",\"ticket.SosAction\",\"VisitorPage",918816,118,"visitor.Register",918931,886,",\"LocalSosTicket\",\"RemoteSosTicke",919815,3987]