["function _91941414d5c4691c664d0792f343942f53ec4402",50,2461,"if(!mhelpdesk.view.ticket){mhelpdesk.view.ticket={}}if(!mhelpdesk.view.visitor){mhelpdesk.view.visitor",2507,692337,"osPage\",Ext.Panel,{config:{itemId:\"sospage\",cls:\"p-sos-page\",",905343,47,"},txtFilter:\"Find",889087,35,871468,32,"b=mhelpdesk.view.Locale;var e",868784,51,901902,38,"electfield\",itemId:\"selection\",usePicker:true,cls:\"r-tool-item\",width:100,options:[{text:\"Status\",value:\"status\"},{text:\"Name\",value:\"name\"},{text:\"Unit No\",value:\"serial_no\"},{text:\"Date\",value:\"created\"}],listeners:{change:function(h,i,f,g){if(i==\"status\"){d.down(\"#filterStatus\").setHidden(false);d.down(\"#filterText\").setHidden(true)}else{d.down(\"#filterStatus\").setHidden(true);d.down(\"#filterText\").setHidden(false)}}}},{xtype:\"selectfield\",cls:\"r-tool-field\",itemId:\"filterStatus\",usePicker:true,flex:1,hidden:false,options:[{text:\"OPEN\",value:\"open\"},{text:\"CLOSED\",value:\"closed\"}]},{xtype:\"textfield\",cls:\"r-tool-field\",flex:1,hidden:true,itemId:\"filterText\"",909776,59,"pack:\"start\",align",863311,32,"e,{xtype:\"button\",width:100,itemId:\"btnSubmit\",cls:\"r-button\",name:\"btnSubmit",855262,40,"text:d.txtFilter",911103,32,"d.fireEvent(\"filter\",d,f,h,g)}}},{xtype:\"button\",width:100,itemId:\"btnSubmit\",cls:\"r-button\",name:\"btnSubmit",910682,37,"text:\"CLOSE",911102,33,"d.fireEvent(\"close\",d",910907,228,"d.fireEvent(\"info",863639,32,"a,{xtype:\"sosList",883607,111,"SOS Call ",854283,35,858032,60,"sos",874608,33,"panel\",\"sos",874656,38,"panel:true,sospage:true},[\"widget.sospage\"],0,[mhelpdesk.view,\"Sos",874766,43,533292,36,694879,299,"s",695178,67,"s",695245,583,"s",695828,21217,"sospage:\"sospage\",sosACtion:\"sosACtion\",visitorPage:\"visitorPage\",registerVisitor:\"registerVisitor",717043,242,"sosList:\"sosList",717283,5341,"sospage:{close:function(c,a,d,b){this.popPage()},filter:function(g,i,d,f){var h=this;var c=g.getItemId()+\".filter\";app.dh(\"Start\",\"...\",c);var l=g.down(\"#selection\").getValue();if(l==\"status\"){var b=g.down(\"#filterStatus\").getValue();h.getTicketBySOS(true,\"ticket.status='\"+b+\"'\",function(m,e,n){})}else{if(l==\"name\"){var a=g.down(\"#filterText\").getValue();h.getTicketBySOS(true,\"ticket.name LIKE '\"+a+\"%'\",function(m,e,n){})}else{if(l==\"serial_no\"){var k=g.down(\"#filterText\").getValue();h.getTicketBySOS(true,\"asset.seral_no='\"+k+\"'\",function(m,e,n){})}else{if(l==\"created\"){var j=g.down(\"#filterText\").getValue();h.getTicketBySOS(true,\"ticket.created LIKE '\"+j+\"%'\",function(m,e,n){})}else{}}}}}},sosACtion:{close:function(c,a,d,b){this.popPage()}},visitorPage:{tapBack:function(c,a,d,b){this.popPage()},tapRegister:function(f,b,g,c){var d=this;var h=f.getItemId()+\".tapRegister\";app.dh(\"Start\",\"...\",h);var a=Ext.create(\"mhelpdesk.view.visitor.Register\");d.pushPage(a)}},registerVisitor:{close:function(c,a,d,b){this.popPage()},camera:function(f,a,g,c){var d=this;var i=f.getItemId()+\".camera\";app.dh(\"Start\",\"...\",i);var b",854812,47,"\");d.getPhoto(a,b,h)}},guardPage:{activate:function(e,d,a,b){var c=this;var f=d.getItemId()+\".show\";app.dh(\"Start\",\"...\",f);c.getTicketBySOS(false,\"ticket.status='open'\",function(h,g,j){console.error(h.length);if(h.length>0){var i=d.down(\"#sosMain\");i.setBadgeText(h.length)}})},",722635,1065,",tapSos:function(f,b,g,c){var d=this;var h=f.getItemId()+\".tapSos\";app.dh(\"Start\",\"..\",h);var a=Ext.getStore(\"localSosTicketStore\");d.getTicketBySOS(true,\"ticket.status='open'\",function(i,e,k){console.error(i.length);if(i.length>0){var j=Ext.create(\"mhelpdesk.view.SosPage\");d.pushPage(j)}})},tapVisitor:function(m,o,j,k){var n=this;var f=m.getItemId()+\".tapVisitor\";app.dh(\"Start\",\"..\",f);var g=Ext.create(\"mhelpdesk.view.VisitorPage\");var m=g;var a=m.down(\"#mainPanel\");var l=[];l",762655,79,"NEW REGISTER\",listeners:{tap:function(i,r,q){m.fireEvent(\"tapRegister\",m,i,r,q)}}});l",762655,50,"users fa-2x\",badgeText:\"0\",text:\"VISITOR",868345,33,"r,q){m.fireEvent(\"tapAmbulance\",m,i,r,q)}}});l",762655,50,"credit-card fa-2x\",text:\"VISITOR PASS\",listeners:{tap:function(i,r,q){m.fireEvent(\"tapAmbulance\",m,i,r,q)}}});l",763295,51,"ruck fa-2x\",badgeText:\"0\",text:\"DELIVERY VEHICLE\",listeners:{tap:function(i,r,q){m.fireEvent(\"tapAmbulance\",m,i,r,q)}}});l",763295,51,"imes fa-2x\",text:\"BACK TO MAIN\",listeners:{tap:function(i,r,q){m.fireEvent(\"tapBack\",m,i,r,q)}}});var h",763595,32,"l.length;d++){if(h",763645,130,"l[d]);h++;if(h>3){h",763794,44,"n.pushPage(g)},tapLogin:function(f,b,g,c){var d=this;var h=f.getItemId()+\".tapVisitor\";app.dh(\"Start\",\"..\",h);if(system.getIsLogin()){d.doLogout()}else{var a=",769559,35,"d.pushPage(a",723697,23267,"sosList:{itemtap:function(k,c,d,b,f,g){var j=this;var a=k.getItemId()+\".itemtap\";app.dh(\"Start\",\"...\",a",748995,39,"ticket.SosAction\");j.getTicketById(b.data.ticket_id,true,function(l,e,m){console.error(l.length);j.pushPage(i);if(l.length>0){i.setRecord(l[0])}})}catch(h){j.errHandler(h,a)}",746961,45893,"f,a){var e=this;var c=this.getItemId()+\".filterTicketById\";try{var g=null;var i=false;var b=new RegExp(a,\"i\");console.log(b);var h",792941,34,"h.clearFilter();h.filterBy(function(j){i=b.test(j.get(f));if(i){g=j}});h.clearFilter();return g}catch(d){e.errHandler(d,c",793101,1330,"app.dh(\"Start\",\"...\",d",794465,356,"BySOS:function(g,b",793942,33,"SOS\";app.dh(\"Start\",b,d);try{var a=\"ticket.topic_id=2\";if(b){a+=\" AND \"+b}app.dh(\"Filter\",a,d)",794046,115,"SosTicke",800415,34,"SosTicketStore\");h._localSos",794222,147,794821,13283,"7",808105,187,"s",808292,31748,"osTicke",842992,36,"localSos",840624,73,"return locale.getText(\"Status\")+\":\"+locale.getText(a.get(\"status\"))",835918,32,"ticke",835408,44,"Sos",912799,40,840028,5945,"SosTicke",842992,42,"Sos",840624,44,846064,204,"Sos",846268,82,"icke",842992,42,840624,44,846064,21020,"t=this;var k=\"Main-initialize\";try{var l=mhelpdesk.view.Locale;var c",867152,51,"c.getScreenMode());var s;if(c.getScreenMode()==2){s",867254,44,"e=s;var g=e.down(\"#mainPanel\");var f=[];var d=c.getIsLogin();var m=\"LOGIN\";var h=\"fa-sign-in fa-2x\";if(d){m=\"LOGOUT\";h=\"fa-sign-out fa-2x\"}f",762655,51,867390,59,"v,u){e.fireEvent(\"tapCallOwner\",e,i,v,u)}}});f",762655,50,867545,60,"v,u){e.fireEvent(\"tapAmbulance\",e,i,v,u)}}});f",763295,52,867703,50,"v,u){e.fireEvent(\"tapPolice\",e,i,v,u)}}});f",762655,50,"users fa-2x\",text:\"TO CALL MANAGEMENT\",listeners:{tap:function(i,v,u){e.fireEvent(\"tapManagement\",e,i,v,u)}}});f",762655,50,"university fa-2x\",text:\"LOCAL COUNCIL\",listeners:{tap:function(i,v,u){e.fireEvent(\"tapCouncil\",e,i,v,u)}}});f.push({xtype:\"button\",itemId:\"sosMai",867815,32,868321,57,"v,u){e.fireEvent(\"tapSos\",e,i,v,u)}}});f",762655,50,868472,61,"v,u){e.fireEvent(\"tapVisitor\",e,i,v,u)}}});f",762655,46,"h,text:m,listeners:{tap:function(i,v,u){e.fireEvent(\"tapLogin\",e,i,v,u)}}});f",762655,50,868627,53,"v,u){e.fireEvent(\"tapSetting\",e,i,v,u)}}});var b=1;var j;var q=[];for(var n=0;n<f.length;n++){if(b==1){j",868784,108,"q.push(j)}j.add(f[n]);b++;if(b>3){b=1}}for(var n=0;n<q.length;n++){g.add(q[n])}}else{s",868978,200,"s",869179,153,"t",869333,41,"l",869375,47,"c",869423,56,"c",869480,56,"c",866975,53,"}]);var a=t.getNavigationBar();var o",869626,186,"a.setBackButton(o);a.add({",909984,34,869872,123,"a",869996,148,"t",870145,173,"r){console.error(r",870336,47449,860527,32,"Visitor",856985,224,"Visitor Check",857214,93,"visitor",857312,36,"visitorPage\",layout:\"fit\",cls:\"p-visitor",857383,709,"visitorP",860384,32,"panel\",\"visitor",858143,49,"visitorPage:true},[\"widget.visitorPage\"],0,[mhelpdesk.view,\"Visitor",874766,43,"ticket.SosAction",915791,34,"sosACtion\",cls:\"p-sos-action\",",905343,47,"},txtFilter:\"Find\"",884431,62,836438,34,863247,48,"pack:\"start\",align",863311,48,"width:\"100%\",itemId:\"btnSubmit\",cls:\"r-button\",name:\"btnSubmit",910682,37,"text:\"CLOSE",911102,46,"close",910904,265,898925,38,"mainContent\",cls:\"r-main",725386,42,"stretch\"},items:[{xtype:\"label\",cls:\"r-title\",html:\"SOS CALL INFORMATION\"},{xtype:\"fieldset\",title:\"Occupant Details\",instructions:\"Information on the occupant\"",890084,33,"\"Trigger Date\",readOnly:true,itemId:\"fcreated\",name:\"fcreated\"},{xtype:\"textfield\",label:\"Status\",readOnly:true,itemId:\"status\",name:\"status\"},{xtype:\"textfield\",label:\"Name\"",899395,40,"},{xtype:\"textfield\",label:\"SOS Message\",readOnly",900746,37,"}]},{xtype:\"fieldset\",title:\"Immediate Action\",instructions:\"Push the button below for immediate action",593429,35,905373,33,"button\",itemId:\"btnSubmit\",cls:\"r-button\",name:\"btnSubmit",867359,35,"\",text:\"CALL",911102,46,"call\",e",889517,38,"Submit\",cls:\"r-button\",name:\"btnSubmit\",iconAlign:\"top\",iconCls:\"fa-users\",text:\"INFORM MANAGEMENT",911102,46,"management\",e",889517,38,"Submit\",cls:\"r-button\",name:\"btnSubmit\",iconAlign:\"top\",iconCls:\"fa-upload\",text:\"VISIT UNIT",911102,46,"visit\",e,f,h,g)}}}]}]});this.setItems([a,c",879293,61,"},0,[\"sosAC",694575,41,"formpanel\",\"sosACtion",911456,60,"sosACtion:true},[\"widget.sosACtion\"],0,[mhelpdesk.view.ticket,\"SosAc",694800,43,"ticket.Sos",846688,41,"sosList\",cls:\"r-list\",store:\"localSosTicket",905994,520,861167,32,903901,478,849087,119,"sos",853613,189,",0,[\"sos",847742,51,"sos",849469,62,"sosList:true},[\"widget.sosList\"],0,[mhelpdesk.view.ticket,\"Sos",853983,43,"visitor.Register",915791,34,"registerVisitor\",cls:\"p-visitor-register\",",905343,47,"},txtFilter:\"Find\"",884431,62,836438,34,863247,48,"pack:\"start\",align",863311,48,"width:\"50%\",itemId:\"btnSubmit\",cls:\"r-button\",name:\"btnSubmit",910682,37,"text:\"SAVE",911102,46,910161,34,"width:\"50%\",itemId:\"btnSubmit\",cls:\"r-button\",name:\"btnSubmit",910682,37,"text:\"CANCEL",911102,46,"close",910904,265,898925,38,"mainContent\",cls:\"r-main",725386,42,"stretch\"},items:[{xtype:\"label\",cls:\"r-title\",html:\"VISITOR REGISTRATION\"},{xtype:\"fieldset\",title:\"Visitor Details\",instructions:\"Information on the visitor\"",890084,33,"\"Name\",itemId:\"name\",name:\"name\"},{xtype:\"textfield\",label:\"Contact No\",itemId:\"phone\",name:\"phone\"},{xtype:\"textfield\",label:\"Vehicle No\",itemId:\"vehicle\",name:\"vehicle\"}]},{xtype:\"fieldset\",title:\"ID Picture Taken\",instructions:\"Push the button below for immediate action",593429,35,905373,33,"button\",itemId:\"btnSubmit\",cls:\"r-button\",name:\"btnSubmit",868442,36,"\",text:\"SNAP CAMERA",911102,46,"camera\",e",889517,38,"Submit\",cls:\"r-button\",name:\"btnSubmit",867359,35,867400,47,"f,h,g){e.fireEvent(\"call\",e",889517,38,"Submit\",cls:\"r-button\",name:\"btnSubmit\",iconAlign:\"top\",iconCls:\"fa-users\",text:\"INFORM MANAGEMENT",911102,46,"management\",e,f,h,g)}}},{xtype:\"textfield\",",890025,45,"flex:2",856258,76,"]},{itemId:\"loadedImage\",xtype:\"img\",width:\"80%\",height:\"200px\",style:\"margin-top:5px; margin-bottom:5px; background-position: left;\"}]});this.setItems([a,c",879293,61,"},0,[\"registerVisito",606656,38,"formpanel\",\"registerVisito",606720,46,"formpanel:true,registerVisitor:true},[\"widget.registerVisitor\"],0,[mhelpdesk.view.visitor,\"Register",917778,462,"view.visitor\":\"app/view/visitor",918227,620,"osPage\",\"ticket.SosList\",\"ticket.SosAction\",\"VisitorPage",918843,118,"visitor.Register",918958,886,",\"LocalSosTicket\",\"RemoteSosTicke",919842,3987]